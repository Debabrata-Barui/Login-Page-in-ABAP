REPORT YDB_LIBRARY_SYSTEM.
TABLES: YDB_LOGIN, YDB_INFO, YDB_BOOK_INFO.
TYPES: BEGIN OF ST_LOGIN,
       MANDT TYPE MANDT,
       STU_ID TYPE YDB_STU_ID,
       USERID TYPE YDB_USERID,
       PASSWORD TYPE YDB_PASSWORD,
  END OF ST_LOGIN.

DATA: WA_LOGIN TYPE  ST_LOGIN,
      WA_LOGIN2 TYPE ST_LOGIN.

DATA: STUID TYPE YDB_STU_ID.
DATA: MSG TYPE CHAR060.
MODULE STATUS_1001 OUTPUT.
  SET PF-STATUS 'MENU'.
*  SET TITLEBAR 'xxx'.
CLEAR: WA_LOGIN2, WA_LOGIN, MSG.
ENDMODULE.

MODULE USER_COMMAND_1001 INPUT.
IF SY-UCOMM = 'LOGIN'.
  IF WA_LOGIN IS NOT INITIAL.
   SELECT SINGLE * FROM YDB_LOGIN INTO CORRESPONDING FIELDS OF WA_LOGIN2
     WHERE USERID = WA_LOGIN-USERID AND PASSWORD = WA_LOGIN-PASSWORD.

    IF SY-SUBRC IS INITIAL.
      STUID = WA_LOGIN2-STU_ID.
      IF STUID IS NOT INITIAL.
        LEAVE TO SCREEN 1006.
      ENDIF.
    ENDIF.
 ELSE.
   MSG = 'ENTER THE CURRECT VALUE'.
 ENDIF.
ENDIF.
IF SY-UCOMM = 'NEW'.
  LEAVE TO SCREEN 1002.
ENDIF.
IF SY-UCOMM = 'BACK'.
  LEAVE TO SCREEN 0.

ELSEIF SY-UCOMM = 'EXIT'.
  LEAVE TO SCREEN 0.
ELSEIF SY-UCOMM = 'CENCEL'.
  LEAVE TO SCREEN 0.
ENDIF.
CLEAR: WA_LOGIN, WA_LOGIN2.
ENDMODULE.
